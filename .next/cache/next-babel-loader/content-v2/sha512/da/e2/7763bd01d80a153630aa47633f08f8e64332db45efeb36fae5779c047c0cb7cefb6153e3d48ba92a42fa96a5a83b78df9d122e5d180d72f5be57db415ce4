{"ast":null,"code":"import prisma from \"../../../prisma/client\";\nexport default async function userHandler(req, res) {\n  const {\n    id\n  } = req.query;\n  console.log(typeof id);\n\n  if (req.method === \"PUT\") {\n    try {\n      const track = await prisma.track.update({\n        where: {\n          id: parseInt(id)\n        },\n        data: {\n          count: {\n            increment: 1\n          }\n        }\n      });\n      await prisma.$disconnect();\n      res.status(200).json(track);\n    } catch (error) {\n      res.status(500).json(error);\n    }\n  }\n}","map":{"version":3,"sources":["/home/jidayyy/francebleu/pages/api/count/[id].ts"],"names":["prisma","userHandler","req","res","id","query","console","log","method","track","update","where","parseInt","data","count","increment","$disconnect","status","json","error"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,wBAAnB;AAGA,eAAe,eAAeC,WAAf,CACXC,GADW,EAEXC,GAFW,EAGE;AACb,QAAM;AAAEC,IAAAA;AAAF,MAASF,GAAG,CAACG,KAAnB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAOH,EAAnB;;AACA,MAAIF,GAAG,CAACM,MAAJ,KAAe,KAAnB,EAA0B;AACtB,QAAI;AACA,YAAMC,KAAK,GAAG,MAAMT,MAAM,CAACS,KAAP,CAAaC,MAAb,CAAoB;AACpCC,QAAAA,KAAK,EAAE;AACHP,UAAAA,EAAE,EAAEQ,QAAQ,CAACR,EAAD;AADT,SAD6B;AAIpCS,QAAAA,IAAI,EAAE;AACFC,UAAAA,KAAK,EAAE;AACHC,YAAAA,SAAS,EAAE;AADR;AADL;AAJ8B,OAApB,CAApB;AAUA,YAAMf,MAAM,CAACgB,WAAP,EAAN;AACAb,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,KAArB;AACH,KAbD,CAaE,OAAOU,KAAP,EAAc;AACZhB,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAArB;AACH;AACJ;AACJ","sourcesContent":["import prisma from \"../../../prisma/client\";\nimport type { NextApiRequest, NextApiResponse } from \"next\";\n\nexport default async function userHandler(\n    req: NextApiRequest,\n    res: NextApiResponse<unknown>,\n): Promise<void> {\n    const { id } = req.query;\n    console.log(typeof id);\n    if (req.method === \"PUT\") {\n        try {\n            const track = await prisma.track.update({\n                where: {\n                    id: parseInt(id as string),\n                },\n                data: {\n                    count: {\n                        increment: 1,\n                    },\n                },\n            });\n            await prisma.$disconnect();\n            res.status(200).json(track);\n        } catch (error) {\n            res.status(500).json(error);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}